{% extends 'TkUserBundle::frame.html.twig' %}

{% set group = app.user.currentMember.tgroup %}

{% block title %}   
<title> {{group.name}} </title>
{% endblock %}

{% block stylesheets %}
{{ parent() }}
<link href="{{ asset('css/group-dashboard.css') }}" rel="stylesheet" type="text/css">
<link href="{{ asset('css/group-chat.css') }}" rel="stylesheet" type="text/css">
<link href="{{ asset('css/group-expenses.css') }}" rel="stylesheet" type="text/css">
{% endblock %}

{% block header %}
<div id="second-row-big" class="row" style="position: relative">
	<div id="group">
		<div id="pictures">
			{% for member in group.members %}
			<div class="member">
				{% if member.user == app.user %}
				<a href="{{ path('tk_user_homepage') }}">
					{% if member.user.facebookId %}
					<img src="http://graph.facebook.com/{{member.user.facebookId}}/picture?width=100&height=100" class="img-circle" alt="{{ member.name }}" style="position: relative">
					{% else %}
					<img src="{{ asset(member.user.picture.path) }}" class="img-circle" alt="{{ member.name }}" style="position: relative">
					{% endif %}
					<p>{{ member.name }}</p>
				</a>
				{% elseif member.user %}
				<a data-target="memberProfileModal" data-id="{{member.id}}" style="cursor: pointer">
					{% if member.user.facebookId %}
					<img src="http://graph.facebook.com/{{member.user.facebookId}}/picture?width=100&height=100" class="img-circle" alt="{{ member.name }}" style="position: relative">
					{% else %}
					<img src="{{ asset(member.user.picture.path) }}" class="img-circle" alt="{{ member.name }}" style="position: relative">
					{% endif %}
					<p>{{ member.name }}</p>
				</a> 
				{% else %}
				<a data-target="memberProfileModal" data-id="{{member.id}}" style="cursor: pointer">
					
					<img src="{{ asset('uploads/profile-pictures/profile-pic.png') }}" class="img-circle" alt="{{ member.name }}" style="position: relative">
					<p>{{ member.name }}</p>
					
				</a>
				{% endif %}
			</div>
			{% endfor %}
			<div class="member" style="vertical-align:top">
				<a href="{{ path('tk_group_add_members') }}">
					<img src="{{ asset('img/Frame/add-member.png') }}" class="img-circle" alt="Add Member" style="position: relative; ">
					<p style="color:#BEB5B2">Add Member</p>
				</a>
			</div>
			<div id="group-flash-messages">
			</div>
		</div>
	</div>
</div>

<!-- modal for seing the profile of member -->
<div id="memberProfileModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<!-- content of the modal loaded via ajax -->
</div>

{% endblock %}


{% block selectionmenu %}
<div id="navbar-row" class="selection-menu" style="padding-top:0">
	<div class="container" style="height:100%;">
		<div  class="row" style="height:100%;">
			<div class="col-md-6 col-md-offset-3" style="height:100%; text-align: center;">
				<a href="#">
					<div id="navbar-expenses">
						EXPENSES
					</div>
				</a>
				<a href="#">
					<div id="navbar-chat">
						CHAT
					</div>
				</a>
				<a href="#">
					<div id="navbar-dashboard">
						DASHBOARD
					</div>
				</a>
			</div>
			<div class="pull-right" id="show-hide-members">
				<a id="toggle-button" style="cursor: pointer">hide members</a>
			</div>
		</div>
	</div>
</div>
<script>
var balances = {{ app.user.currentMember.tgroup.arrayBalances|json_encode|raw }};
var members = {{ app.user.currentMember.tgroup.arrayMembers|json_encode|raw }};
var currency = {{ app.user.currentMember.tgroup.currency.symbol|json_encode|raw }};
</script>
{% endblock %}

{% block javascripts %}
<script type='text/javascript' src="{{ asset('js/group.js') }}"></script>
{% endblock %}